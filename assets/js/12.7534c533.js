(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{356:function(a,t,v){a.exports=v.p+"assets/img/640.ed007d3c.png"},426:function(a,t,v){"use strict";v.r(t);var _=v(44),r=Object(_.a)({},(function(){var a=this,t=a.$createElement,_=a._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[_("h1",{attrs:{id:"浏览器缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存"}},[a._v("#")]),a._v(" 浏览器缓存")]),a._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://mp.weixin.qq.com/s/CsJyKVq3IIjDv32TZ9m7fQ",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考"),_("OutboundLink")],1)])]),a._v(" "),_("h2",{attrs:{id:"什么是缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是缓存"}},[a._v("#")]),a._v(" 什么是缓存")]),a._v(" "),_("ul",[_("li",[a._v("当我们第一次访问网站 例如juejin.cn 时，电脑会把网站上的资源 如图片和数据下载到电脑上，\n当我们再次访问该网站时，网站就会从电脑中加载出来，这就是缓存。")])]),a._v(" "),_("h2",{attrs:{id:"缓存的好处"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存的好处"}},[a._v("#")]),a._v(" 缓存的好处")]),a._v(" "),_("ul",[_("li",[a._v("缓解服务器压力 不用每次都去请求服务器")]),a._v(" "),_("li",[a._v("性能提升，加载本地资源要比请求服务器快")]),a._v(" "),_("li",[a._v("减少带宽消耗 加载本地资源消耗的带宽比较小")])]),a._v(" "),_("h2",{attrs:{id:"web缓存类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#web缓存类型"}},[a._v("#")]),a._v(" web缓存类型")]),a._v(" "),_("ul",[_("li",[a._v("数据库缓存")]),a._v(" "),_("li",[a._v("CDN缓存")]),a._v(" "),_("li",[a._v("代理服务器缓存")]),a._v(" "),_("li",[a._v("浏览器缓存 是指本地计算机开辟一个内存区，同时也开辟一个硬盘区作为数据传输的缓冲区，\n然后用这个缓冲区暂时保存用户以前访问过的信息")])]),a._v(" "),_("h2",{attrs:{id:"浏览器缓存过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存过程"}},[a._v("#")]),a._v(" 浏览器缓存过程")]),a._v(" "),_("ul",[_("li",[a._v("强缓存")]),a._v(" "),_("li",[a._v("协商缓存")])]),a._v(" "),_("h2",{attrs:{id:"缓存位置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存位置"}},[a._v("#")]),a._v(" 缓存位置")]),a._v(" "),_("ul",[_("li",[a._v("Service Worker")]),a._v(" "),_("li",[a._v("Memory Cache  读取数据比磁盘（Disk）块，但缓存持续性很短，会随着进程的释放而释放，一旦关闭 tab 页，内存中缓存也释放了")]),a._v(" "),_("li",[a._v("Disk Cache 相对 Memory Cache 容量更大 存储时效更长，基本什么都能存，覆盖面积大")]),a._v(" "),_("li",[a._v("Push Cache")])]),a._v(" "),_("h2",{attrs:{id:"强缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#强缓存"}},[a._v("#")]),a._v(" 强缓存")]),a._v(" "),_("ul",[_("li",[a._v("当我们访问URL时 不会向服务器发送请求，直接从缓存中读取资源，但是会返回200状态码")])]),a._v(" "),_("h3",{attrs:{id:"如何设置强缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#如何设置强缓存"}},[a._v("#")]),a._v(" 如何设置强缓存")]),a._v(" "),_("ul",[_("li",[a._v("浏览器会根据response Header 来判断是否对资源进行缓存，如果响应头中存在 expires pragma 或者cache-control 字段\n代表是强缓存，浏览器就会把资源存在memory cache 或 disk cache 中。第二次请求时，浏览器判断请求头参数，\n如果符合强缓存条件，就从本地缓存中拿数据。")])]),a._v(" "),_("p",[_("img",{attrs:{src:v(356),alt:"流程图"}})]),a._v(" "),_("ul",[_("li",[_("p",[a._v("expires"),_("br"),a._v("\n是http1.0控制网页缓存的字段，值为时间戳（格林尼治时间），服务器返回该请求结果缓存的到期时间，\n再次发送请求时，如果未超过过期时间，则直接使用缓存资源，过期了则重新请求。\n缺点：判断是否过期使用本地时间，但本地时间是可以修改的")])]),a._v(" "),_("li",[_("p",[a._v("cache-control"),_("br"),a._v("\n是http1.1中控制网页缓存的字段，优先级更高。"),_("br"),a._v("\n主要取值：")]),a._v(" "),_("ol",[_("li",[a._v("public 客户端和服务器都可以缓存资源")]),a._v(" "),_("li",[a._v("privite 资源只有客户端缓存")]),a._v(" "),_("li",[a._v("no-cache 客户端缓存资源，但是 是否缓存需要经过协商缓存来验证")]),a._v(" "),_("li",[a._v("no-store 不使用缓存")]),a._v(" "),_("li",[a._v("max-age 缓存保质期"),_("br"),a._v("\n使用了 max-age 相对时间 解决了 expires 的问题")])])])]),a._v(" "),_("h2",{attrs:{id:"协商缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[a._v("#")]),a._v(" 协商缓存")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("强缓存失效后，浏览器携带缓存标识向服务器发送请求，有服务器根据缓存标识来决定是否使用缓存的过程")])]),a._v(" "),_("li",[_("p",[a._v("主要由两种情况：")])])]),a._v(" "),_("ol",[_("li",[_("p",[a._v("协商缓存生效，返回 304")])]),a._v(" "),_("li",[_("p",[a._v("协商缓存失败，返回200 和 请求结果")])])]),a._v(" "),_("h3",{attrs:{id:"如何设置协商缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#如何设置协商缓存"}},[a._v("#")]),a._v(" 如何设置协商缓存")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("Last-Modified / If-Modified-Since")])]),a._v(" "),_("li",[_("p",[a._v("Etag / If-None-Match")])])]),a._v(" "),_("h2",{attrs:{id:"强缓存和协商缓存的区别"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#强缓存和协商缓存的区别"}},[a._v("#")]),a._v(" 强缓存和协商缓存的区别")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("强缓存不发送请求，所以不感知资源是否更新")])]),a._v(" "),_("li",[_("p",[a._v("协商缓存会发送请求，感知资源是否改变")])]),a._v(" "),_("li",[_("p",[a._v("大部分 web 默认开启协商缓存")])])]),a._v(" "),_("h2",{attrs:{id:"刷新对-强缓存-和-协商缓存-的影响"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#刷新对-强缓存-和-协商缓存-的影响"}},[a._v("#")]),a._v(" 刷新对 强缓存 和 协商缓存 的影响")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("ctrl + f5 强制刷新时，直接从服务器加载，跳过强缓存和协商缓存")])]),a._v(" "),_("li",[_("p",[a._v("f5 刷新时，跳过强缓存，但是会检查协商缓存")])]),a._v(" "),_("li",[_("p",[a._v("浏览器地址栏输入URL后回车，如果浏览器发现缓存中有这个文件了，就不继续发请求了，直接缓存拿")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);